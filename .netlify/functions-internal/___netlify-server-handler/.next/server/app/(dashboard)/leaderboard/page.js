(()=>{var e={};e.id=16,e.ids=[16],e.modules={7849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},3685:e=>{"use strict";e.exports=require("http")},5687:e=>{"use strict";e.exports=require("https")},5477:e=>{"use strict";e.exports=require("punycode")},2781:e=>{"use strict";e.exports=require("stream")},7310:e=>{"use strict";e.exports=require("url")},9796:e=>{"use strict";e.exports=require("zlib")},8205:(e,s,t)=>{"use strict";t.r(s),t.d(s,{GlobalError:()=>i.a,__next_app__:()=>p,originalPathname:()=>x,pages:()=>o,routeModule:()=>u,tree:()=>c});var a=t(482),r=t(9108),l=t(2563),i=t.n(l),n=t(8300),d={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>n[e]);t.d(s,d);let c=["",{children:["(dashboard)",{children:["leaderboard",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,5930)),"C:\\Users\\wangqiyuan\\project\\cursor\\aicodegame\\src\\app\\(dashboard)\\leaderboard\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,5021)),"C:\\Users\\wangqiyuan\\project\\cursor\\aicodegame\\src\\app\\(dashboard)\\layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,9361,23)),"next/dist/client/components/not-found-error"]}]},{layout:[()=>Promise.resolve().then(t.bind(t,3933)),"C:\\Users\\wangqiyuan\\project\\cursor\\aicodegame\\src\\app\\layout.tsx"],error:[()=>Promise.resolve().then(t.bind(t,4117)),"C:\\Users\\wangqiyuan\\project\\cursor\\aicodegame\\src\\app\\error.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,9361,23)),"next/dist/client/components/not-found-error"]}],o=["C:\\Users\\wangqiyuan\\project\\cursor\\aicodegame\\src\\app\\(dashboard)\\leaderboard\\page.tsx"],x="/(dashboard)/leaderboard/page",p={require:t,loadChunk:()=>Promise.resolve()},u=new a.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/(dashboard)/leaderboard/page",pathname:"/leaderboard",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},5493:(e,s,t)=>{Promise.resolve().then(t.bind(t,2380))},5187:(e,s,t)=>{"use strict";t.d(s,{Z:()=>a});/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,t(9224).Z)("Award",[["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}],["path",{d:"M15.477 12.89 17 22l-5-3-5 3 1.523-9.11",key:"em7aur"}]])},3211:(e,s,t)=>{"use strict";t.d(s,{Z:()=>a});/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,t(9224).Z)("BookOpen",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}]])},7189:(e,s,t)=>{"use strict";t.d(s,{Z:()=>a});/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,t(9224).Z)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]])},4826:(e,s,t)=>{"use strict";t.d(s,{Z:()=>a});/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,t(9224).Z)("Code",[["polyline",{points:"16 18 22 12 16 6",key:"z7tu5w"}],["polyline",{points:"8 6 2 12 8 18",key:"1eg1df"}]])},2086:(e,s,t)=>{"use strict";t.d(s,{Z:()=>a});/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,t(9224).Z)("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]])},8120:(e,s,t)=>{"use strict";t.d(s,{Z:()=>a});/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,t(9224).Z)("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]])},8200:(e,s,t)=>{"use strict";t.d(s,{Z:()=>a});/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,t(9224).Z)("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]])},3746:(e,s,t)=>{"use strict";t.d(s,{Z:()=>a});/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,t(9224).Z)("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},473:(e,s,t)=>{"use strict";t.d(s,{Z:()=>a});/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,t(9224).Z)("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]])},6064:(e,s,t)=>{"use strict";t.d(s,{Z:()=>a});/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,t(9224).Z)("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]])},782:(e,s,t)=>{"use strict";t.d(s,{Z:()=>a});/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,t(9224).Z)("Trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]])},8822:(e,s,t)=>{"use strict";t.d(s,{Z:()=>a});/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,t(9224).Z)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])},9895:(e,s,t)=>{"use strict";t.d(s,{Z:()=>a});/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,t(9224).Z)("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]])},2380:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>u});var a=t(5344),r=t(3729),l=t(3890),i=t(6700),n=t(4538),d=t(782);/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let c=(0,t(9224).Z)("Medal",[["path",{d:"M7.21 15 2.66 7.14a2 2 0 0 1 .13-2.2L4.4 2.8A2 2 0 0 1 6 2h12a2 2 0 0 1 1.6.8l1.6 2.14a2 2 0 0 1 .14 2.2L16.79 15",key:"143lza"}],["path",{d:"M11 12 5.12 2.2",key:"qhuxz6"}],["path",{d:"m13 12 5.88-9.8",key:"hbye0f"}],["path",{d:"M8 7h8",key:"i86dvs"}],["circle",{cx:"12",cy:"17",r:"5",key:"qbz8iq"}],["path",{d:"M12 18v-2h-.5",key:"fawc4q"}]]);var o=t(6064),x=t(5187),p=t(1453);function u(){let{profile:e}=(0,i.a)(),[s,t]=(0,r.useState)([]),[u,m]=(0,r.useState)(null),[h,y]=(0,r.useState)(!0);(0,r.useEffect)(()=>{g()},[e]);let g=async()=>{let s=(0,l.e)(),{data:a}=await s.from("users").select("id, username, display_name, level, xp").order("xp",{ascending:!1}).limit(100);if(a){let r=a.map((e,s)=>({...e,rank:s+1}));if(t(r),e){let t=r.find(s=>s.id===e.id);if(t)m(t);else{let{count:t}=await s.from("users").select("*",{count:"exact",head:!0}).gt("xp",e.xp);m({id:e.id,username:e.username||"",display_name:e.display_name,level:e.level,xp:e.xp,rank:(t||0)+1})}}}y(!1)},v=e=>1===e?a.jsx(d.Z,{className:"h-6 w-6 text-yellow-500"}):2===e?a.jsx(c,{className:"h-6 w-6 text-gray-400"}):3===e?a.jsx(c,{className:"h-6 w-6 text-orange-600"}):(0,a.jsxs)("span",{className:"text-lg font-bold text-gray-600",children:["#",e]});return h?a.jsx("div",{className:"flex min-h-screen items-center justify-center",children:a.jsx("div",{className:"loading-spinner"})}):a.jsx("div",{className:"min-h-screen bg-gradient-to-br from-yellow-50 via-white to-orange-50 p-6",children:(0,a.jsxs)("div",{className:"mx-auto max-w-4xl",children:[(0,a.jsxs)("div",{className:"mb-8 text-center",children:[a.jsx("div",{className:"mb-4 inline-flex h-16 w-16 items-center justify-center rounded-full bg-gradient-to-br from-yellow-400 to-orange-500 text-white shadow-lg",children:a.jsx(d.Z,{className:"h-8 w-8"})}),a.jsx("h1",{className:"mb-2 text-4xl font-bold text-gray-900",children:"全球排行榜"}),a.jsx("p",{className:"text-gray-600",children:"与全球学习者一起竞技!"})]}),u&&a.jsx("div",{className:"mb-6 rounded-2xl border-2 border-blue-500 bg-blue-50 p-6 shadow-lg",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[a.jsx("div",{className:"flex h-12 w-12 items-center justify-center rounded-full bg-blue-500 text-white",children:a.jsx(o.Z,{className:"h-6 w-6"})}),(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-sm text-blue-600",children:"你的排名"}),(0,a.jsxs)("p",{className:"text-2xl font-bold text-blue-900",children:["#",u.rank]})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[a.jsx(n.U,{level:u.level,size:"sm",showTitle:!1}),(0,a.jsxs)("div",{className:"text-right",children:[a.jsx("p",{className:"font-semibold text-gray-900",children:u.display_name||u.username}),(0,a.jsxs)("p",{className:"text-sm text-blue-600",children:[(0,p.uf)(u.xp)," XP"]})]})]})]})}),(0,a.jsxs)("div",{className:"rounded-2xl border bg-white shadow-lg overflow-hidden",children:[(0,a.jsxs)("div",{className:"grid grid-cols-12 gap-4 border-b bg-gray-50 px-6 py-3 font-semibold text-gray-700",children:[a.jsx("div",{className:"col-span-1",children:"排名"}),a.jsx("div",{className:"col-span-6",children:"用户"}),a.jsx("div",{className:"col-span-2 text-center",children:"等级"}),a.jsx("div",{className:"col-span-3 text-right",children:"经验值"})]}),a.jsx("div",{className:"divide-y",children:s.map(s=>{let t=e?.id===s.id;return(0,a.jsxs)("div",{className:`grid grid-cols-12 gap-4 px-6 py-4 transition-colors ${t?"bg-blue-50":"hover:bg-gray-50"}`,children:[a.jsx("div",{className:"col-span-1 flex items-center",children:v(s.rank)}),(0,a.jsxs)("div",{className:"col-span-6 flex items-center gap-3",children:[a.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded-full bg-gradient-to-br from-blue-400 to-purple-500 text-sm font-bold text-white",children:(s.display_name||s.username).charAt(0).toUpperCase()}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("p",{className:`font-semibold ${t?"text-blue-700":"text-gray-900"}`,children:[s.display_name||s.username,t&&a.jsx("span",{className:"ml-2 rounded-full bg-blue-500 px-2 py-0.5 text-xs text-white",children:"你"})]}),(0,a.jsxs)("p",{className:"text-sm text-gray-500",children:["@",s.username]})]})]}),a.jsx("div",{className:"col-span-2 flex items-center justify-center",children:a.jsx(n.U,{level:s.level,size:"sm",showTitle:!1})}),a.jsx("div",{className:"col-span-3 flex items-center justify-end",children:(0,a.jsxs)("div",{className:"text-right",children:[a.jsx("p",{className:"font-bold text-gray-900",children:(0,p.uf)(s.xp)}),a.jsx("p",{className:"text-xs text-gray-500",children:"XP"})]})})]},s.id)})}),0===s.length&&(0,a.jsxs)("div",{className:"py-12 text-center text-gray-500",children:[a.jsx(x.Z,{className:"mx-auto mb-3 h-12 w-12 text-gray-400"}),a.jsx("p",{children:"暂无排行榜数据"})]})]}),a.jsx("div",{className:"mt-6 rounded-lg bg-blue-50 p-4 text-center text-sm text-blue-700",children:"\uD83D\uDCA1 完成更多关卡、获得高分、解锁成就可以获得更多XP,提升排名!"})]})})}},5930:(e,s,t)=>{"use strict";t.r(s),t.d(s,{$$typeof:()=>l,__esModule:()=>r,default:()=>i});let a=(0,t(6843).createProxy)(String.raw`C:\Users\wangqiyuan\project\cursor\aicodegame\src\app\(dashboard)\leaderboard\page.tsx`),{__esModule:r,$$typeof:l}=a,i=a.default}};var s=require("../../../webpack-runtime.js");s.C(e);var t=e=>s(s.s=e),a=s.X(0,[225,253,506,923,301,700,445],()=>t(8205));module.exports=a})();