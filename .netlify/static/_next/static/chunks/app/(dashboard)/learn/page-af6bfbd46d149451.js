(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[401],{9805:function(e,s,l){Promise.resolve().then(l.bind(l,5251))},9609:function(e,s,l){"use strict";l.d(s,{Z:function(){return t}});/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let t=(0,l(140).Z)("BookOpen",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}]])},863:function(e,s,l){"use strict";l.d(s,{Z:function(){return t}});/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let t=(0,l(140).Z)("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},371:function(e,s,l){"use strict";l.d(s,{Z:function(){return t}});/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let t=(0,l(140).Z)("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]])},3629:function(e,s,l){"use strict";l.d(s,{default:function(){return n.a}});var t=l(5511),n=l.n(t)},5251:function(e,s,l){"use strict";l.r(s),l.d(s,{default:function(){return v}});var t=l(789),n=l(8207),a=l(3629),r=l(8520),i=l(4930),d=l(9986),c=l(9739),o=l(371),x=l(863);/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let m=(0,l(140).Z)("PlayCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polygon",{points:"10 8 16 12 10 16 10 8",key:"1cimsy"}]]);var u=l(4653),h=l(9609),p=l(9911),f=l(3869);function v(){let{profile:e,loading:s}=(0,r.a)(),[l,v]=(0,n.useState)([]),[g,b]=(0,n.useState)(!0);(0,n.useEffect)(()=>{e&&j()},[e]);let j=async()=>{let s=(0,i.e)(),{data:l}=await s.from("courses").select("\n        id,\n        title,\n        description,\n        level,\n        order,\n        lessons:lessons(count)\n      ").eq("is_published",!0).order("level").order("order");l&&e&&v(await Promise.all(l.map(async l=>{let{data:t}=await s.from("lessons").select("id, xp_reward").eq("course_id",l.id),n=(null==t?void 0:t.map(e=>e.id))||[],a=(null==t?void 0:t.reduce((e,s)=>e+s.xp_reward,0))||0,{count:r}=await s.from("user_progress").select("*",{count:"exact",head:!0}).eq("user_id",e.id).in("lesson_id",n).eq("status","completed");return{id:l.id,title:l.title,description:l.description,level:l.level,order:l.order,lessonCount:(null==t?void 0:t.length)||0,completedCount:r||0,totalXP:a}}))),b(!1)};if(s||!e)return(0,t.jsx)("div",{className:"flex min-h-screen items-center justify-center",children:(0,t.jsx)("div",{className:"loading-spinner"})});let N=(0,f.IN)(e.xp),y=e=>["\uD83D\uDCDD","\uD83C\uDFA8","⚡","\uD83D\uDD27","\uD83D\uDE80"][e-1]||"\uD83D\uDCDA",w=e=>["from-orange-400 to-red-400","from-purple-400 to-pink-400","from-yellow-400 to-orange-400","from-green-400 to-teal-400","from-blue-400 to-cyan-400"][e-1]||"from-gray-400 to-gray-500";return(0,t.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-purple-50 p-6",children:(0,t.jsxs)("div",{className:"mx-auto max-w-6xl",children:[(0,t.jsxs)("div",{className:"mb-8 rounded-2xl border bg-white p-6 shadow-lg",children:[(0,t.jsxs)("div",{className:"mb-4 flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"mb-2 text-3xl font-bold text-gray-900",children:"学习中心"}),(0,t.jsx)("p",{className:"text-gray-600",children:"选择课程,开始你的编程之旅!"})]}),(0,t.jsxs)("div",{className:"text-right",children:[(0,t.jsx)("div",{className:"mb-1 text-sm text-gray-600",children:"你的进度"}),(0,t.jsxs)("div",{className:"text-2xl font-bold text-blue-600",children:["Level ",e.level]})]})]}),(0,t.jsx)(c.P,{currentXP:N.currentXP,nextLevelXP:N.nextLevelXP,level:e.level,size:"lg"})]}),(0,t.jsx)("div",{className:"mb-6 rounded-lg border-l-4 border-blue-500 bg-blue-50 p-4",children:(0,t.jsxs)("div",{className:"flex items-start gap-3",children:[(0,t.jsx)(o.Z,{className:"mt-0.5 h-5 w-5 shrink-0 text-blue-600"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"font-semibold text-blue-900",children:"学习路径建议"}),(0,t.jsx)("p",{className:"mt-1 text-sm text-blue-700",children:"建议按照 Level 1 → Level 5 的顺序学习,每个 Level 完成后自动解锁下一个。完成关卡可以获得 XP 和金币奖励!"})]})]})}),g?(0,t.jsx)("div",{className:"py-12 text-center",children:(0,t.jsx)("div",{className:"loading-spinner mx-auto"})}):l.length>0?(0,t.jsx)("div",{className:"space-y-6",children:l.map((e,s)=>{let n=e.lessonCount>0?e.completedCount/e.lessonCount*100:0,r=e.completedCount===e.lessonCount&&e.lessonCount>0,i=s>0&&l[s-1].completedCount<l[s-1].lessonCount,c=e.completedCount>0&&!r;return(0,t.jsxs)("div",{className:"group relative overflow-hidden rounded-2xl border-2 bg-white shadow-lg transition-all ".concat(i?"border-gray-300 opacity-60":r?"border-green-500 hover:shadow-xl":"border-blue-300 hover:scale-[1.02] hover:shadow-xl"),children:[(0,t.jsx)("div",{className:"absolute right-0 top-0 h-full w-1/3 bg-gradient-to-l ".concat(w(e.level)," opacity-10")}),(0,t.jsx)("div",{className:"relative p-8",children:(0,t.jsxs)("div",{className:"flex items-start gap-6",children:[(0,t.jsx)("div",{className:"flex h-20 w-20 shrink-0 items-center justify-center rounded-2xl bg-gradient-to-br ".concat(w(e.level)," text-4xl shadow-lg"),children:y(e.level)}),(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsxs)("div",{className:"mb-2 flex items-center gap-3",children:[(0,t.jsxs)("span",{className:"rounded-full bg-blue-100 px-3 py-1 text-sm font-medium text-blue-700",children:["Level ",e.level]}),r&&(0,t.jsxs)("span",{className:"flex items-center gap-1 rounded-full bg-green-100 px-3 py-1 text-sm font-medium text-green-700",children:[(0,t.jsx)(x.Z,{className:"h-4 w-4"}),"已完成"]}),c&&(0,t.jsxs)("span",{className:"flex items-center gap-1 rounded-full bg-yellow-100 px-3 py-1 text-sm font-medium text-yellow-700",children:[(0,t.jsx)(m,{className:"h-4 w-4"}),"进行中"]}),i&&(0,t.jsxs)("span",{className:"flex items-center gap-1 rounded-full bg-gray-100 px-3 py-1 text-sm font-medium text-gray-600",children:[(0,t.jsx)(u.Z,{className:"h-4 w-4"}),"未解锁"]})]}),(0,t.jsx)("h2",{className:"mb-2 text-2xl font-bold text-gray-900",children:e.title}),(0,t.jsx)("p",{className:"mb-4 text-gray-600",children:e.description}),(0,t.jsxs)("div",{className:"mb-4",children:[(0,t.jsxs)("div",{className:"mb-2 flex items-center justify-between text-sm",children:[(0,t.jsxs)("span",{className:"text-gray-600",children:["进度: ",e.completedCount," / ",e.lessonCount," 关卡"]}),(0,t.jsxs)("span",{className:"font-medium text-blue-600",children:[Math.round(n),"%"]})]}),(0,t.jsx)("div",{className:"h-2 overflow-hidden rounded-full bg-gray-200",children:(0,t.jsx)("div",{className:"h-full rounded-full bg-gradient-to-r from-blue-500 to-cyan-500 transition-all duration-500",style:{width:"".concat(n,"%")}})})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center gap-4 text-sm text-gray-600",children:[(0,t.jsxs)("div",{className:"flex items-center gap-1",children:[(0,t.jsx)(h.Z,{className:"h-4 w-4"}),(0,t.jsxs)("span",{children:[e.lessonCount," 关卡"]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-1",children:[(0,t.jsx)(p.Z,{className:"h-4 w-4 text-yellow-500"}),(0,t.jsxs)("span",{children:[e.totalXP," XP"]})]})]}),(0,t.jsx)(a.default,{href:i?"#":"/learn/".concat(e.id),children:(0,t.jsx)(d.z,{disabled:i,className:r?"bg-green-600 hover:bg-green-700":"",children:i?"完成上一个课程以解锁":r?"复习课程":c?"继续学习":"开始学习"})})]})]})]})})]},e.id)})}):(0,t.jsxs)("div",{className:"rounded-2xl border bg-white p-12 text-center shadow-lg",children:[(0,t.jsx)(h.Z,{className:"mx-auto mb-4 h-16 w-16 text-gray-400"}),(0,t.jsx)("h3",{className:"mb-2 text-xl font-semibold text-gray-700",children:"暂无课程"}),(0,t.jsx)("p",{className:"text-gray-600",children:"课程内容正在准备中,敬请期待!"})]})]})})}}},function(e){e.O(0,[359,519,511,520,180,211,395,744],function(){return e(e.s=9805)}),_N_E=e.O()}]);