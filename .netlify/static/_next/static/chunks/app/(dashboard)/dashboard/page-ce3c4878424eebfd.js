(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[903],{2088:function(e,t,s){Promise.resolve().then(s.bind(s,3959))},9609:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,s(140).Z)("BookOpen",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}]])},1981:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,s(140).Z)("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]])},8982:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,s(140).Z)("Code",[["polyline",{points:"16 18 22 12 16 6",key:"z7tu5w"}],["polyline",{points:"8 6 2 12 8 18",key:"1eg1df"}]])},371:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,s(140).Z)("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]])},4893:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,s(140).Z)("Trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]])},6990:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,s(140).Z)("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]])},3629:function(e,t,s){"use strict";s.d(t,{default:function(){return a.a}});var r=s(5511),a=s.n(r)},3959:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return y}});var r=s(789),a=s(8207),l=s(3629),n=s(8520),c=s(4930),i=s(9986),d=s(9739),o=s(5628),x=s(9609),m=s(8982),h=s(6990),u=s(4893),p=s(7315);/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let g=(0,s(140).Z)("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);var f=s(9911),j=s(371),v=s(3869);function y(){let{profile:e,loading:t}=(0,n.a)(),[s,y]=(0,a.useState)({completedLessons:0,totalProjects:0,recentAchievements:[]});(0,a.useEffect)(()=>{e&&b()},[e]);let b=async()=>{if(!e)return;let t=(0,c.e)(),{count:s}=await t.from("user_progress").select("*",{count:"exact",head:!0}).eq("user_id",e.id).eq("status","completed"),{count:r}=await t.from("projects").select("*",{count:"exact",head:!0}).eq("user_id",e.id),{data:a}=await t.from("user_achievements").select("\n        *,\n        achievements(*)\n      ").eq("user_id",e.id).order("unlocked_at",{ascending:!1}).limit(3);y({completedLessons:s||0,totalProjects:r||0,recentAchievements:a||[]})};if(t||!e)return(0,r.jsx)("div",{className:"flex min-h-screen items-center justify-center",children:(0,r.jsx)("div",{className:"loading-spinner"})});let N=(0,v.IN)(e.xp),w=[{title:"继续学习",description:"从上次的地方继续",icon:x.Z,href:"/learn",color:"from-blue-400 to-blue-600"},{title:"代码编辑器",description:"创作你的作品",icon:m.Z,href:"/editor",color:"from-purple-400 to-purple-600"},{title:"社区作品",description:"发现优秀作品",icon:h.Z,href:"/community",color:"from-green-400 to-green-600"},{title:"排行榜",description:"查看你的排名",icon:u.Z,href:"/leaderboard",color:"from-orange-400 to-orange-600"}];return(0,r.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-purple-50 p-6",children:(0,r.jsxs)("div",{className:"mx-auto max-w-7xl",children:[(0,r.jsxs)("div",{className:"mb-8",children:[(0,r.jsxs)("h1",{className:"mb-2 text-3xl font-bold text-gray-900",children:["欢迎回来, ",e.display_name||e.username,"! \uD83D\uDC4B"]}),(0,r.jsx)("p",{className:"text-gray-600",children:"准备好今天的学习挑战了吗?"})]}),(0,r.jsxs)("div",{className:"grid gap-6 lg:grid-cols-3",children:[(0,r.jsxs)("div",{className:"space-y-6 lg:col-span-2",children:[(0,r.jsxs)("div",{className:"rounded-2xl border bg-white p-6 shadow-lg",children:[(0,r.jsxs)("div",{className:"mb-4 flex items-center justify-between",children:[(0,r.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:"学习进度"}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)(p.Z,{className:"h-5 w-5 text-yellow-500"}),(0,r.jsxs)("span",{className:"text-sm text-gray-600",children:[e.xp," XP"]})]})]}),(0,r.jsx)(d.P,{currentXP:N.currentXP,nextLevelXP:N.nextLevelXP,level:e.level,size:"lg"}),(0,r.jsxs)("div",{className:"mt-6 grid grid-cols-3 gap-4",children:[(0,r.jsxs)("div",{className:"rounded-lg bg-blue-50 p-4 text-center",children:[(0,r.jsxs)("div",{className:"mb-1 text-2xl font-bold text-blue-600",children:["Level ",e.level]}),(0,r.jsx)("div",{className:"text-xs text-gray-600",children:"当前等级"})]}),(0,r.jsxs)("div",{className:"rounded-lg bg-purple-50 p-4 text-center",children:[(0,r.jsx)("div",{className:"mb-1 text-2xl font-bold text-purple-600",children:s.completedLessons}),(0,r.jsx)("div",{className:"text-xs text-gray-600",children:"完成关卡"})]}),(0,r.jsxs)("div",{className:"rounded-lg bg-green-50 p-4 text-center",children:[(0,r.jsxs)("div",{className:"mb-1 text-2xl font-bold text-green-600",children:[e.coins," \uD83E\uDE99"]}),(0,r.jsx)("div",{className:"text-xs text-gray-600",children:"金币"})]})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h2",{className:"mb-4 text-xl font-semibold text-gray-900",children:"快捷访问"}),(0,r.jsx)("div",{className:"grid gap-4 sm:grid-cols-2",children:w.map((e,t)=>{let s=e.icon;return(0,r.jsx)(l.default,{href:e.href,children:(0,r.jsx)("div",{className:"group cursor-pointer overflow-hidden rounded-xl border bg-white p-6 shadow-sm transition-all hover:scale-[1.02] hover:shadow-md",children:(0,r.jsxs)("div",{className:"mb-3 flex items-center gap-3",children:[(0,r.jsx)("div",{className:"flex h-12 w-12 items-center justify-center rounded-xl bg-gradient-to-br ".concat(e.color," text-white shadow-lg"),children:(0,r.jsx)(s,{className:"h-6 w-6"})}),(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsx)("h3",{className:"font-semibold text-gray-900",children:e.title}),(0,r.jsx)("p",{className:"text-xs text-gray-600",children:e.description})]}),(0,r.jsx)(g,{className:"h-5 w-5 text-gray-400 transition-transform group-hover:translate-x-1"})]})})},t)})})]})]}),(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"rounded-2xl border bg-white p-6 shadow-lg",children:[(0,r.jsxs)("div",{className:"mb-4 flex items-center justify-between",children:[(0,r.jsx)("h3",{className:"font-semibold text-gray-900",children:"最近成就"}),(0,r.jsx)(l.default,{href:"/profile",children:(0,r.jsxs)(i.z,{variant:"ghost",size:"sm",className:"gap-2",children:["查看全部",(0,r.jsx)(g,{className:"h-3 w-3"})]})})]}),s.recentAchievements.length>0?(0,r.jsx)("div",{className:"space-y-3",children:s.recentAchievements.map(e=>(0,r.jsx)(o.R,{achievement:e.achievements,size:"sm"},e.id))}):(0,r.jsxs)("div",{className:"py-8 text-center",children:[(0,r.jsx)(f.Z,{className:"mx-auto mb-2 h-12 w-12 text-gray-300"}),(0,r.jsx)("p",{className:"text-sm text-gray-500",children:"还没有获得成就"}),(0,r.jsx)("p",{className:"text-xs text-gray-400",children:"继续学习来解锁!"})]})]}),(0,r.jsxs)("div",{className:"rounded-2xl border border-yellow-200 bg-gradient-to-br from-yellow-50 to-orange-50 p-6 shadow-lg",children:[(0,r.jsxs)("div",{className:"mb-3 flex items-center gap-2",children:[(0,r.jsx)("div",{className:"flex h-10 w-10 items-center justify-center rounded-lg bg-yellow-400 text-xl",children:"\uD83C\uDFAF"}),(0,r.jsx)("h3",{className:"font-semibold text-gray-900",children:"每日挑战"})]}),(0,r.jsx)("p",{className:"mb-4 text-sm text-gray-700",children:"完成今日挑战,获得额外奖励!"}),(0,r.jsxs)(i.z,{className:"w-full gap-2",variant:"outline",children:[(0,r.jsx)(j.Z,{className:"h-4 w-4"}),"开始挑战"]})]}),(0,r.jsxs)("div",{className:"rounded-2xl border border-blue-200 bg-gradient-to-br from-blue-50 to-cyan-50 p-6 shadow-lg",children:[(0,r.jsx)("h3",{className:"mb-2 font-semibold text-gray-900",children:"\uD83D\uDCA1 学习提示"}),(0,r.jsx)("p",{className:"text-sm text-gray-700",children:"坚持每天学习 30 分钟,你将在一个月内掌握 Web 开发基础!"})]})]})]})]})})}},5628:function(e,t,s){"use strict";s.d(t,{R:function(){return c}});var r=s(789),a=s(1981),l=s(4653),n=s(3869);function c(e){let{achievement:t,unlocked:s,unlockedAt:c,size:i="md"}=e;return(0,r.jsxs)("div",{className:"relative overflow-hidden rounded-xl border-2 transition-all ".concat({sm:"p-3",md:"p-4",lg:"p-6"}[i]," ").concat(s?"".concat((0,n.Iv)(t.rarity)," border-current shadow-lg hover:scale-105"):"border-gray-300 bg-gray-100 opacity-60 hover:opacity-80"),children:[s&&(0,r.jsx)("div",{className:"achievement-glow absolute inset-0 bg-gradient-to-br from-white/20 to-transparent"}),(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsxs)("div",{className:"mb-3 flex items-center justify-between",children:[(0,r.jsx)("div",{className:{sm:"text-3xl",md:"text-4xl",lg:"text-5xl"}[i],children:s?t.icon:"\uD83D\uDD12"}),s?(0,r.jsx)("div",{className:"flex h-8 w-8 items-center justify-center rounded-full bg-green-500 text-white",children:(0,r.jsx)(a.Z,{className:"h-5 w-5"})}):(0,r.jsx)("div",{className:"flex h-8 w-8 items-center justify-center rounded-full bg-gray-400 text-white",children:(0,r.jsx)(l.Z,{className:"h-5 w-5"})})]}),(0,r.jsx)("h3",{className:"font-bold ".concat("sm"===i?"text-sm":"text-base"),children:t.title}),(0,r.jsx)("p",{className:"mt-1 ".concat("sm"===i?"text-xs":"text-sm"," text-gray-600"),children:t.description}),(0,r.jsxs)("div",{className:"mt-3 flex items-center justify-between",children:[(0,r.jsxs)("span",{className:"rounded-full px-2 py-1 text-xs font-medium ".concat(s?"bg-yellow-100 text-yellow-700":"bg-gray-200 text-gray-500"),children:["+",t.xp_reward," XP"]}),(0,r.jsx)("span",{className:"text-xs font-medium uppercase text-gray-500",children:t.rarity})]}),s&&c&&(0,r.jsxs)("div",{className:"mt-2 border-t pt-2 text-xs text-gray-500",children:["解锁于 ",new Date(c).toLocaleDateString("zh-CN")]})]})]})}}},function(e){e.O(0,[359,519,511,520,180,211,395,744],function(){return e(e.s=2088)}),_N_E=e.O()}]);