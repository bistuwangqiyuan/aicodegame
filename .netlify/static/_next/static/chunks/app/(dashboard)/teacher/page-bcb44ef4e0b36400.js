(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[267],{9309:function(e,t,s){Promise.resolve().then(s.bind(s,1007))},9496:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,s(7461).Z)("Award",[["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}],["path",{d:"M15.477 12.89 17 22l-5-3-5 3 1.523-9.11",key:"em7aur"}]])},4562:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,s(7461).Z)("BookOpen",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}]])},9733:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,s(7461).Z)("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]])},4059:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,s(7461).Z)("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]])},1007:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return x}});var r=s(3827),c=s(4090),n=s(7269),l=s(7907),a=s(1097),i=s(4562),o=s(4059),d=s(9496),u=s(9733);/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let m=(0,s(7461).Z)("PlusCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]]);var h=s(8792);function x(){let{profile:e,loading:t}=(0,n.a)(),s=(0,l.useRouter)(),[x,p]=(0,c.useState)({myCourses:0,totalStudents:0,completedLessons:0,averageScore:0});(0,c.useEffect)(()=>{if(!t&&e){if("teacher"!==e.role&&"admin"!==e.role){s.push("/");return}f()}},[t,e]);let f=async()=>{if(!e)return;let t=(0,a.e)(),{count:s}=await t.from("courses").select("*",{count:"exact",head:!0}).eq("created_by",e.id),{count:r}=await t.from("users").select("*",{count:"exact",head:!0}).eq("role","student"),{count:c}=await t.from("user_progress").select("*",{count:"exact",head:!0}).eq("status","completed"),{data:n}=await t.from("user_progress").select("score").eq("status","completed").not("score","is",null);p({myCourses:s||0,totalStudents:r||0,completedLessons:c||0,averageScore:Math.round(n&&n.length>0?n.reduce((e,t)=>e+(t.score||0),0)/n.length:0)})};if(t||!e)return(0,r.jsx)("div",{className:"flex min-h-screen items-center justify-center",children:(0,r.jsx)("div",{className:"loading-spinner"})});if("teacher"!==e.role&&"admin"!==e.role)return(0,r.jsx)("div",{className:"flex min-h-screen items-center justify-center",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("h1",{className:"mb-2 text-2xl font-bold text-gray-900",children:"权限不足"}),(0,r.jsx)("p",{className:"text-gray-600",children:"你没有访问教师工作台的权限"})]})});let g=[{title:"我的课程",value:x.myCourses,icon:i.Z,color:"from-blue-400 to-blue-600"},{title:"学生总数",value:x.totalStudents,icon:o.Z,color:"from-purple-400 to-purple-600"},{title:"完成关卡",value:x.completedLessons,icon:d.Z,color:"from-green-400 to-green-600"},{title:"平均分数",value:"".concat(x.averageScore,"分"),icon:u.Z,color:"from-orange-400 to-orange-600"}],y=[{title:"创建新课程",description:"设计全新的学习内容",link:"/admin/courses/new",icon:m,color:"blue"},{title:"管理课程",description:"编辑和管理现有课程",link:"/admin/courses",icon:i.Z,color:"purple"},{title:"学生进度",description:"查看学生学习情况",link:"/teacher/students",icon:o.Z,color:"green"},{title:"数据分析",description:"查看教学数据和统计",link:"/teacher/analytics",icon:u.Z,color:"orange"}];return(0,r.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 via-white to-purple-50 p-6",children:(0,r.jsxs)("div",{className:"mx-auto max-w-7xl",children:[(0,r.jsxs)("div",{className:"mb-8",children:[(0,r.jsx)("h1",{className:"mb-2 text-3xl font-bold text-gray-900",children:"教师工作台"}),(0,r.jsxs)("p",{className:"text-gray-600",children:["欢迎, ",e.display_name||e.username," 老师!"]})]}),(0,r.jsx)("div",{className:"mb-8 grid gap-6 sm:grid-cols-2 lg:grid-cols-4",children:g.map((e,t)=>{let s=e.icon;return(0,r.jsxs)("div",{className:"overflow-hidden rounded-2xl border bg-white p-6 shadow-sm",children:[(0,r.jsxs)("div",{className:"mb-4 flex items-center justify-between",children:[(0,r.jsx)("div",{className:"flex h-12 w-12 items-center justify-center rounded-xl bg-gradient-to-br ".concat(e.color," text-white shadow-lg"),children:(0,r.jsx)(s,{className:"h-6 w-6"})}),(0,r.jsx)("div",{className:"text-3xl font-bold text-gray-900",children:e.value})]}),(0,r.jsx)("h3",{className:"text-sm font-medium text-gray-600",children:e.title})]},t)})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h2",{className:"mb-4 text-xl font-semibold text-gray-900",children:"快捷操作"}),(0,r.jsx)("div",{className:"grid gap-4 sm:grid-cols-2",children:y.map((e,t)=>{let s=e.icon;return(0,r.jsx)(h.default,{href:e.link,children:(0,r.jsx)("div",{className:"group cursor-pointer rounded-xl border bg-white p-6 shadow-sm transition-all hover:shadow-md",children:(0,r.jsxs)("div",{className:"mb-3 flex items-center gap-3",children:[(0,r.jsx)("div",{className:"flex h-12 w-12 items-center justify-center rounded-lg bg-".concat(e.color,"-100 text-").concat(e.color,"-600"),children:(0,r.jsx)(s,{className:"h-6 w-6"})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"font-semibold text-gray-900",children:e.title}),(0,r.jsx)("p",{className:"text-sm text-gray-600",children:e.description})]})]})})},t)})})]})]})})}}},function(e){e.O(0,[491,792,269,971,69,744],function(){return e(e.s=9309)}),_N_E=e.O()}]);