(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[688],{3868:function(e,t,s){Promise.resolve().then(s.bind(s,2726))},1981:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,s(140).Z)("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]])},8759:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,s(140).Z)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]])},9874:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,s(140).Z)("Code2",[["path",{d:"m18 16 4-4-4-4",key:"1inbqp"}],["path",{d:"m6 8-4 4 4 4",key:"15zrgr"}],["path",{d:"m14.5 4-5 16",key:"e7oirm"}]])},2053:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,s(140).Z)("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a2.121 2.121 0 1 1 3 3L12 15l-4 1 1-4Z",key:"1lpok0"}]])},4893:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,s(140).Z)("Trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]])},2726:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return j}});var a=s(789),l=s(8207),r=s(8520),n=s(4930),c=s(3291),i=s(9739),d=s(5628),x=s(9986),m=s(2053),o=s(9874),h=s(4893),u=s(8759),g=s(9911),f=s(3869);function j(){let{profile:e,loading:t}=(0,r.a)(),[s,j]=(0,l.useState)([]),[p,v]=(0,l.useState)(new Set),[N,b]=(0,l.useState)({completedLessons:0,totalProjects:0,totalLearningTime:0,rank:0});(0,l.useEffect)(()=>{e&&(y(),w())},[e]);let y=async()=>{let t=(0,n.e)(),{data:s}=await t.from("achievements").select("*").order("rarity",{ascending:!1});if(s&&j(s),e){let{data:s}=await t.from("user_achievements").select("achievement_id").eq("user_id",e.id);s&&v(new Set(s.map(e=>e.achievement_id)))}},w=async()=>{if(!e)return;let t=(0,n.e)(),{count:s}=await t.from("user_progress").select("*",{count:"exact",head:!0}).eq("user_id",e.id).eq("status","completed"),{count:a}=await t.from("projects").select("*",{count:"exact",head:!0}).eq("user_id",e.id),{count:l}=await t.from("users").select("*",{count:"exact",head:!0}).gt("xp",e.xp);b({completedLessons:s||0,totalProjects:a||0,totalLearningTime:0,rank:(l||0)+1})};if(t||!e)return(0,a.jsx)("div",{className:"flex min-h-screen items-center justify-center",children:(0,a.jsx)("div",{className:"loading-spinner"})});let k=(0,f.IN)(e.xp);return(0,a.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-purple-50 p-6",children:(0,a.jsxs)("div",{className:"mx-auto max-w-6xl",children:[(0,a.jsx)("div",{className:"rounded-2xl border bg-white p-8 shadow-lg",children:(0,a.jsxs)("div",{className:"flex items-start gap-6",children:[(0,a.jsx)("div",{children:(0,a.jsx)(c.U,{level:e.level,size:"lg",showTitle:!1})}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)("div",{className:"mb-4 flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:e.display_name||e.username}),(0,a.jsxs)("p",{className:"text-gray-600",children:["@",e.username]})]}),(0,a.jsxs)(x.z,{size:"sm",variant:"outline",className:"gap-2",children:[(0,a.jsx)(m.Z,{className:"h-4 w-4"}),"编辑资料"]})]}),(0,a.jsx)("div",{className:"mb-6",children:(0,a.jsx)(i.P,{currentXP:k.currentXP,nextLevelXP:k.nextLevelXP,level:e.level,size:"lg"})}),(0,a.jsxs)("div",{className:"grid grid-cols-4 gap-4",children:[(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-blue-600",children:(0,f.uf)(e.xp)}),(0,a.jsx)("div",{className:"text-sm text-gray-600",children:"总经验值"})]}),(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-green-600",children:(0,f.uf)(e.coins)}),(0,a.jsx)("div",{className:"text-sm text-gray-600",children:"金币"})]}),(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-purple-600",children:N.completedLessons}),(0,a.jsx)("div",{className:"text-sm text-gray-600",children:"完成关卡"})]}),(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsxs)("div",{className:"text-2xl font-bold text-orange-600",children:["#",N.rank]}),(0,a.jsx)("div",{className:"text-sm text-gray-600",children:"全球排名"})]})]})]})]})}),(0,a.jsxs)("div",{className:"mt-6 grid gap-6 md:grid-cols-3",children:[(0,a.jsxs)("div",{className:"rounded-xl border bg-white p-6 shadow-sm",children:[(0,a.jsxs)("div",{className:"mb-3 flex items-center gap-3",children:[(0,a.jsx)("div",{className:"flex h-10 w-10 items-center justify-center rounded-lg bg-blue-100 text-blue-600",children:(0,a.jsx)(o.Z,{className:"h-5 w-5"})}),(0,a.jsx)("h3",{className:"font-semibold text-gray-900",children:"学习进度"})]}),(0,a.jsx)("p",{className:"text-3xl font-bold text-blue-600",children:N.completedLessons}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"关卡已完成"})]}),(0,a.jsxs)("div",{className:"rounded-xl border bg-white p-6 shadow-sm",children:[(0,a.jsxs)("div",{className:"mb-3 flex items-center gap-3",children:[(0,a.jsx)("div",{className:"flex h-10 w-10 items-center justify-center rounded-lg bg-purple-100 text-purple-600",children:(0,a.jsx)(h.Z,{className:"h-5 w-5"})}),(0,a.jsx)("h3",{className:"font-semibold text-gray-900",children:"作品数量"})]}),(0,a.jsx)("p",{className:"text-3xl font-bold text-purple-600",children:N.totalProjects}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"创建的作品"})]}),(0,a.jsxs)("div",{className:"rounded-xl border bg-white p-6 shadow-sm",children:[(0,a.jsxs)("div",{className:"mb-3 flex items-center gap-3",children:[(0,a.jsx)("div",{className:"flex h-10 w-10 items-center justify-center rounded-lg bg-green-100 text-green-600",children:(0,a.jsx)(u.Z,{className:"h-5 w-5"})}),(0,a.jsx)("h3",{className:"font-semibold text-gray-900",children:"学习时长"})]}),(0,a.jsx)("p",{className:"text-3xl font-bold text-green-600",children:N.totalLearningTime}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"小时"})]})]}),(0,a.jsxs)("div",{className:"mt-6 rounded-2xl border bg-white p-8 shadow-lg",children:[(0,a.jsxs)("div",{className:"mb-6 flex items-center gap-3",children:[(0,a.jsx)(g.Z,{className:"h-6 w-6 text-yellow-500"}),(0,a.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"成就墙"}),(0,a.jsxs)("span",{className:"rounded-full bg-blue-100 px-3 py-1 text-sm font-medium text-blue-700",children:[p.size," / ",s.length]})]}),(0,a.jsx)("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4",children:s.map(e=>(0,a.jsx)(d.R,{achievement:e,unlocked:p.has(e.id),size:"md"},e.id))}),0===s.length&&(0,a.jsxs)("div",{className:"py-12 text-center text-gray-500",children:[(0,a.jsx)(g.Z,{className:"mx-auto mb-3 h-12 w-12 text-gray-400"}),(0,a.jsx)("p",{children:"暂无成就数据"})]})]})]})})}},5628:function(e,t,s){"use strict";s.d(t,{R:function(){return c}});var a=s(789),l=s(1981),r=s(4653),n=s(3869);function c(e){let{achievement:t,unlocked:s,unlockedAt:c,size:i="md"}=e;return(0,a.jsxs)("div",{className:"relative overflow-hidden rounded-xl border-2 transition-all ".concat({sm:"p-3",md:"p-4",lg:"p-6"}[i]," ").concat(s?"".concat((0,n.Iv)(t.rarity)," border-current shadow-lg hover:scale-105"):"border-gray-300 bg-gray-100 opacity-60 hover:opacity-80"),children:[s&&(0,a.jsx)("div",{className:"achievement-glow absolute inset-0 bg-gradient-to-br from-white/20 to-transparent"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsxs)("div",{className:"mb-3 flex items-center justify-between",children:[(0,a.jsx)("div",{className:{sm:"text-3xl",md:"text-4xl",lg:"text-5xl"}[i],children:s?t.icon:"\uD83D\uDD12"}),s?(0,a.jsx)("div",{className:"flex h-8 w-8 items-center justify-center rounded-full bg-green-500 text-white",children:(0,a.jsx)(l.Z,{className:"h-5 w-5"})}):(0,a.jsx)("div",{className:"flex h-8 w-8 items-center justify-center rounded-full bg-gray-400 text-white",children:(0,a.jsx)(r.Z,{className:"h-5 w-5"})})]}),(0,a.jsx)("h3",{className:"font-bold ".concat("sm"===i?"text-sm":"text-base"),children:t.title}),(0,a.jsx)("p",{className:"mt-1 ".concat("sm"===i?"text-xs":"text-sm"," text-gray-600"),children:t.description}),(0,a.jsxs)("div",{className:"mt-3 flex items-center justify-between",children:[(0,a.jsxs)("span",{className:"rounded-full px-2 py-1 text-xs font-medium ".concat(s?"bg-yellow-100 text-yellow-700":"bg-gray-200 text-gray-500"),children:["+",t.xp_reward," XP"]}),(0,a.jsx)("span",{className:"text-xs font-medium uppercase text-gray-500",children:t.rarity})]}),s&&c&&(0,a.jsxs)("div",{className:"mt-2 border-t pt-2 text-xs text-gray-500",children:["解锁于 ",new Date(c).toLocaleDateString("zh-CN")]})]})]})}},3291:function(e,t,s){"use strict";s.d(t,{U:function(){return n}});var a=s(789),l=s(4893),r=s(3869);function n(e){let{level:t,size:s="md",showTitle:n=!0}=e,c=(0,r.yF)(t);return(0,a.jsxs)("div",{className:"inline-flex flex-col items-center gap-2",children:[(0,a.jsxs)("div",{className:"relative flex items-center justify-center rounded-full bg-gradient-to-br ".concat(t>=10?"from-orange-400 to-red-500":t>=8?"from-purple-400 to-pink-500":t>=5?"from-blue-400 to-cyan-500":"from-gray-400 to-gray-500"," ").concat({sm:"h-10 w-10 text-sm",md:"h-16 w-16 text-lg",lg:"h-24 w-24 text-2xl"}[s]," shadow-lg"),children:[(0,a.jsx)("div",{className:"absolute inset-1 flex items-center justify-center rounded-full bg-white/20",children:(0,a.jsx)("span",{className:"font-bold text-white",children:t})}),(0,a.jsx)(l.Z,{className:"absolute -right-1 -top-1 h-5 w-5 text-yellow-400"})]}),n&&(0,a.jsx)("span",{className:"text-sm font-medium text-gray-700",children:c})]})}}},function(e){e.O(0,[359,519,520,180,211,395,744],function(){return e(e.s=3868)}),_N_E=e.O()}]);