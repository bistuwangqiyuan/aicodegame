(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[16],{188:function(e,t,s){Promise.resolve().then(s.bind(s,3580))},9911:function(e,t,s){"use strict";s.d(t,{Z:function(){return n}});/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let n=(0,s(140).Z)("Award",[["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}],["path",{d:"M15.477 12.89 17 22l-5-3-5 3 1.523-9.11",key:"em7aur"}]])},371:function(e,t,s){"use strict";s.d(t,{Z:function(){return n}});/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let n=(0,s(140).Z)("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]])},4893:function(e,t,s){"use strict";s.d(t,{Z:function(){return n}});/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let n=(0,s(140).Z)("Trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]])},3580:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return m}});var n=s(789),l=s(8207),a=s(4930),r=s(8520),i=s(3291),c=s(4893);/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let d=(0,s(140).Z)("Medal",[["path",{d:"M7.21 15 2.66 7.14a2 2 0 0 1 .13-2.2L4.4 2.8A2 2 0 0 1 6 2h12a2 2 0 0 1 1.6.8l1.6 2.14a2 2 0 0 1 .14 2.2L16.79 15",key:"143lza"}],["path",{d:"M11 12 5.12 2.2",key:"qhuxz6"}],["path",{d:"m13 12 5.88-9.8",key:"hbye0f"}],["path",{d:"M8 7h8",key:"i86dvs"}],["circle",{cx:"12",cy:"17",r:"5",key:"qbz8iq"}],["path",{d:"M12 18v-2h-.5",key:"fawc4q"}]]);var x=s(371),o=s(9911),u=s(3869);function m(){let{profile:e}=(0,r.a)(),[t,s]=(0,l.useState)([]),[m,h]=(0,l.useState)(null),[f,p]=(0,l.useState)(!0);(0,l.useEffect)(()=>{g()},[e]);let g=async()=>{let t=(0,a.e)(),{data:n}=await t.from("users").select("id, username, display_name, level, xp").order("xp",{ascending:!1}).limit(100);if(n){let l=n.map((e,t)=>({...e,rank:t+1}));if(s(l),e){let s=l.find(t=>t.id===e.id);if(s)h(s);else{let{count:s}=await t.from("users").select("*",{count:"exact",head:!0}).gt("xp",e.xp);h({id:e.id,username:e.username||"",display_name:e.display_name,level:e.level,xp:e.xp,rank:(s||0)+1})}}}p(!1)},y=e=>1===e?(0,n.jsx)(c.Z,{className:"h-6 w-6 text-yellow-500"}):2===e?(0,n.jsx)(d,{className:"h-6 w-6 text-gray-400"}):3===e?(0,n.jsx)(d,{className:"h-6 w-6 text-orange-600"}):(0,n.jsxs)("span",{className:"text-lg font-bold text-gray-600",children:["#",e]});return f?(0,n.jsx)("div",{className:"flex min-h-screen items-center justify-center",children:(0,n.jsx)("div",{className:"loading-spinner"})}):(0,n.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-yellow-50 via-white to-orange-50 p-6",children:(0,n.jsxs)("div",{className:"mx-auto max-w-4xl",children:[(0,n.jsxs)("div",{className:"mb-8 text-center",children:[(0,n.jsx)("div",{className:"mb-4 inline-flex h-16 w-16 items-center justify-center rounded-full bg-gradient-to-br from-yellow-400 to-orange-500 text-white shadow-lg",children:(0,n.jsx)(c.Z,{className:"h-8 w-8"})}),(0,n.jsx)("h1",{className:"mb-2 text-4xl font-bold text-gray-900",children:"全球排行榜"}),(0,n.jsx)("p",{className:"text-gray-600",children:"与全球学习者一起竞技!"})]}),m&&(0,n.jsx)("div",{className:"mb-6 rounded-2xl border-2 border-blue-500 bg-blue-50 p-6 shadow-lg",children:(0,n.jsxs)("div",{className:"flex items-center justify-between",children:[(0,n.jsxs)("div",{className:"flex items-center gap-4",children:[(0,n.jsx)("div",{className:"flex h-12 w-12 items-center justify-center rounded-full bg-blue-500 text-white",children:(0,n.jsx)(x.Z,{className:"h-6 w-6"})}),(0,n.jsxs)("div",{children:[(0,n.jsx)("p",{className:"text-sm text-blue-600",children:"你的排名"}),(0,n.jsxs)("p",{className:"text-2xl font-bold text-blue-900",children:["#",m.rank]})]})]}),(0,n.jsxs)("div",{className:"flex items-center gap-4",children:[(0,n.jsx)(i.U,{level:m.level,size:"sm",showTitle:!1}),(0,n.jsxs)("div",{className:"text-right",children:[(0,n.jsx)("p",{className:"font-semibold text-gray-900",children:m.display_name||m.username}),(0,n.jsxs)("p",{className:"text-sm text-blue-600",children:[(0,u.uf)(m.xp)," XP"]})]})]})]})}),(0,n.jsxs)("div",{className:"rounded-2xl border bg-white shadow-lg overflow-hidden",children:[(0,n.jsxs)("div",{className:"grid grid-cols-12 gap-4 border-b bg-gray-50 px-6 py-3 font-semibold text-gray-700",children:[(0,n.jsx)("div",{className:"col-span-1",children:"排名"}),(0,n.jsx)("div",{className:"col-span-6",children:"用户"}),(0,n.jsx)("div",{className:"col-span-2 text-center",children:"等级"}),(0,n.jsx)("div",{className:"col-span-3 text-right",children:"经验值"})]}),(0,n.jsx)("div",{className:"divide-y",children:t.map(t=>{let s=(null==e?void 0:e.id)===t.id;return(0,n.jsxs)("div",{className:"grid grid-cols-12 gap-4 px-6 py-4 transition-colors ".concat(s?"bg-blue-50":"hover:bg-gray-50"),children:[(0,n.jsx)("div",{className:"col-span-1 flex items-center",children:y(t.rank)}),(0,n.jsxs)("div",{className:"col-span-6 flex items-center gap-3",children:[(0,n.jsx)("div",{className:"flex h-10 w-10 items-center justify-center rounded-full bg-gradient-to-br from-blue-400 to-purple-500 text-sm font-bold text-white",children:(t.display_name||t.username).charAt(0).toUpperCase()}),(0,n.jsxs)("div",{children:[(0,n.jsxs)("p",{className:"font-semibold ".concat(s?"text-blue-700":"text-gray-900"),children:[t.display_name||t.username,s&&(0,n.jsx)("span",{className:"ml-2 rounded-full bg-blue-500 px-2 py-0.5 text-xs text-white",children:"你"})]}),(0,n.jsxs)("p",{className:"text-sm text-gray-500",children:["@",t.username]})]})]}),(0,n.jsx)("div",{className:"col-span-2 flex items-center justify-center",children:(0,n.jsx)(i.U,{level:t.level,size:"sm",showTitle:!1})}),(0,n.jsx)("div",{className:"col-span-3 flex items-center justify-end",children:(0,n.jsxs)("div",{className:"text-right",children:[(0,n.jsx)("p",{className:"font-bold text-gray-900",children:(0,u.uf)(t.xp)}),(0,n.jsx)("p",{className:"text-xs text-gray-500",children:"XP"})]})})]},t.id)})}),0===t.length&&(0,n.jsxs)("div",{className:"py-12 text-center text-gray-500",children:[(0,n.jsx)(o.Z,{className:"mx-auto mb-3 h-12 w-12 text-gray-400"}),(0,n.jsx)("p",{children:"暂无排行榜数据"})]})]}),(0,n.jsx)("div",{className:"mt-6 rounded-lg bg-blue-50 p-4 text-center text-sm text-blue-700",children:"\uD83D\uDCA1 完成更多关卡、获得高分、解锁成就可以获得更多XP,提升排名!"})]})})}},3291:function(e,t,s){"use strict";s.d(t,{U:function(){return r}});var n=s(789),l=s(4893),a=s(3869);function r(e){let{level:t,size:s="md",showTitle:r=!0}=e,i=(0,a.yF)(t);return(0,n.jsxs)("div",{className:"inline-flex flex-col items-center gap-2",children:[(0,n.jsxs)("div",{className:"relative flex items-center justify-center rounded-full bg-gradient-to-br ".concat(t>=10?"from-orange-400 to-red-500":t>=8?"from-purple-400 to-pink-500":t>=5?"from-blue-400 to-cyan-500":"from-gray-400 to-gray-500"," ").concat({sm:"h-10 w-10 text-sm",md:"h-16 w-16 text-lg",lg:"h-24 w-24 text-2xl"}[s]," shadow-lg"),children:[(0,n.jsx)("div",{className:"absolute inset-1 flex items-center justify-center rounded-full bg-white/20",children:(0,n.jsx)("span",{className:"font-bold text-white",children:t})}),(0,n.jsx)(l.Z,{className:"absolute -right-1 -top-1 h-5 w-5 text-yellow-400"})]}),r&&(0,n.jsx)("span",{className:"text-sm font-medium text-gray-700",children:i})]})}},3869:function(e,t,s){"use strict";s.d(t,{IN:function(){return c},Iv:function(){return x},cn:function(){return a},fy:function(){return u},uf:function(){return r},vV:function(){return o},yF:function(){return d}});var n=s(9640),l=s(3648);function a(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return(0,l.m6)((0,n.W)(t))}function r(e){return new Intl.NumberFormat("zh-CN").format(e)}function i(e){return e*(e+1)*50}function c(e){let t=1,s=0;for(;s+i(t)<=e&&t<10;)s+=i(t),t++;let n=e-s,l=i(t);return{level:t,currentXP:n,nextLevelXP:l,progress:Math.min(n/l*100,100)}}function d(e){return["新手","学徒","练习生","开发者","工程师","专家","大师","宗师","传奇","网页高手"][e-1]||"未知"}function x(e){return({common:"text-gray-500 bg-gray-100",rare:"text-blue-500 bg-blue-100",epic:"text-purple-500 bg-purple-100",legendary:"text-orange-500 bg-orange-100"})[e]}function o(e){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e)}function u(e){let t=0;return e.length>=8&&t++,e.length>=12&&t++,/[a-z]/.test(e)&&/[A-Z]/.test(e)&&t++,/\d/.test(e)&&t++,/[^a-zA-Z0-9]/.test(e)&&t++,Math.min(t,4)}}},function(e){e.O(0,[359,519,520,211,395,744],function(){return e(e.s=188)}),_N_E=e.O()}]);