(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[772],{2171:function(e,t,r){Promise.resolve().then(r.bind(r,84))},9911:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,r(140).Z)("Award",[["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}],["path",{d:"M15.477 12.89 17 22l-5-3-5 3 1.523-9.11",key:"em7aur"}]])},9609:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,r(140).Z)("BookOpen",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}]])},7621:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,r(140).Z)("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},371:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,r(140).Z)("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]])},6990:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,r(140).Z)("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]])},3629:function(e,t,r){"use strict";r.d(t,{default:function(){return i.a}});var s=r(5511),i=r.n(s)},84:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return p}});var s=r(789),i=r(8207),n=r(8520),l=r(4505),a=r(4930),c=r(6990),o=r(9609),d=r(9911);/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let u=(0,r(140).Z)("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);var m=r(371),h=r(7621),x=r(3629);function p(){let{profile:e,loading:t}=(0,n.a)(),r=(0,l.useRouter)(),[p,f]=(0,i.useState)({totalUsers:0,activeCourses:0,totalProjects:0,pendingReports:0});(0,i.useEffect)(()=>{if(!t&&e){if("admin"!==e.role&&"teacher"!==e.role){r.push("/");return}v()}},[t,e]);let v=async()=>{let e=(0,a.e)(),{count:t}=await e.from("users").select("*",{count:"exact",head:!0}),{count:r}=await e.from("courses").select("*",{count:"exact",head:!0}).eq("is_published",!0),{count:s}=await e.from("projects").select("*",{count:"exact",head:!0}),{count:i}=await e.from("reports").select("*",{count:"exact",head:!0}).eq("status","pending");f({totalUsers:t||0,activeCourses:r||0,totalProjects:s||0,pendingReports:i||0})};if(t||!e)return(0,s.jsx)("div",{className:"flex min-h-screen items-center justify-center",children:(0,s.jsx)("div",{className:"loading-spinner"})});if("admin"!==e.role&&"teacher"!==e.role)return(0,s.jsx)("div",{className:"flex min-h-screen items-center justify-center",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("h1",{className:"mb-2 text-2xl font-bold text-gray-900",children:"权限不足"}),(0,s.jsx)("p",{className:"text-gray-600",children:"你没有访问管理后台的权限"})]})});let g=[{title:"总用户数",value:p.totalUsers,icon:c.Z,color:"from-blue-400 to-blue-600",link:"/admin/users"},{title:"活跃课程",value:p.activeCourses,icon:o.Z,color:"from-purple-400 to-purple-600",link:"/admin/courses"},{title:"作品总数",value:p.totalProjects,icon:d.Z,color:"from-green-400 to-green-600",link:"/admin/projects"},{title:"待处理举报",value:p.pendingReports,icon:u,color:"from-red-400 to-red-600",link:"/admin/reports"}],y=[{title:"用户管理",description:"查看和管理用户账号",icon:c.Z,link:"/admin/users",color:"blue"},{title:"课程管理",description:"创建和编辑课程内容",icon:o.Z,link:"/admin/courses",color:"purple"},{title:"作品审核",description:"审核和管理用户作品",icon:d.Z,link:"/admin/projects",color:"green"},{title:"举报处理",description:"处理用户举报和投诉",icon:u,link:"/admin/reports",color:"red"},{title:"数据统计",description:"查看平台数据和分析",icon:m.Z,link:"/admin/analytics",color:"orange"},{title:"系统设置",description:"配置平台参数和功能",icon:h.Z,link:"/admin/settings",color:"gray"}];return(0,s.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 via-white to-blue-50 p-6",children:(0,s.jsxs)("div",{className:"mx-auto max-w-7xl",children:[(0,s.jsxs)("div",{className:"mb-8",children:[(0,s.jsx)("h1",{className:"mb-2 text-3xl font-bold text-gray-900",children:"管理后台"}),(0,s.jsxs)("p",{className:"text-gray-600",children:["欢迎回来, ",e.display_name||e.username,"!"]})]}),(0,s.jsx)("div",{className:"mb-8 grid gap-6 sm:grid-cols-2 lg:grid-cols-4",children:g.map((e,t)=>{let r=e.icon;return(0,s.jsx)(x.default,{href:e.link,children:(0,s.jsxs)("div",{className:"group cursor-pointer overflow-hidden rounded-2xl border bg-white p-6 shadow-sm transition-all hover:shadow-lg",children:[(0,s.jsxs)("div",{className:"mb-4 flex items-center justify-between",children:[(0,s.jsx)("div",{className:"flex h-12 w-12 items-center justify-center rounded-xl bg-gradient-to-br ".concat(e.color," text-white shadow-lg"),children:(0,s.jsx)(r,{className:"h-6 w-6"})}),(0,s.jsx)("div",{className:"text-3xl font-bold text-gray-900",children:e.value})]}),(0,s.jsx)("h3",{className:"text-sm font-medium text-gray-600",children:e.title})]})},t)})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"mb-4 text-xl font-semibold text-gray-900",children:"快捷操作"}),(0,s.jsx)("div",{className:"grid gap-4 sm:grid-cols-2 lg:grid-cols-3",children:y.map((e,t)=>{let r=e.icon;return(0,s.jsx)(x.default,{href:e.link,children:(0,s.jsxs)("div",{className:"group cursor-pointer rounded-xl border bg-white p-6 shadow-sm transition-all hover:shadow-md",children:[(0,s.jsxs)("div",{className:"mb-3 flex items-center gap-3",children:[(0,s.jsx)("div",{className:"flex h-10 w-10 items-center justify-center rounded-lg bg-".concat(e.color,"-100 text-").concat(e.color,"-600"),children:(0,s.jsx)(r,{className:"h-5 w-5"})}),(0,s.jsx)("h3",{className:"font-semibold text-gray-900",children:e.title})]}),(0,s.jsx)("p",{className:"text-sm text-gray-600",children:e.description})]})},t)})})]})]})})}}},function(e){e.O(0,[519,511,520,211,395,744],function(){return e(e.s=2171)}),_N_E=e.O()}]);